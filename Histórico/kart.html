<!DOCTYPE html>
<html lang="en">
<head>
    <title>Kart 21</title>
    <meta charset="UTF-8">
   <!--
    <link rel="stylesheet" type="text/css" href="../css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="../css/dc.css"/>
     
    <script type="text/javascript" src="../js/d3.js"></script>
<script type="text/javascript" src="../js/crossfilter.js"></script>
<script type="text/javascript" src="../js/dc.js"></script>

-->   

    
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  
    <!-- DC Core CSS -->
	<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/dc/2.0.0-beta.32/dc.min.css" />

 
  
  
  <!-- jQuery -->
	<!-- Bootstrap Core JavaScript -->
	<!-- D3 Core JavaScript -->
	
  
    
</head>
    <style type="text/css">

		.tooltip {
		    top: 100px;
		    left: 100px;
		    -moz-border-radius: 5px;
		    border-radius: 5px;
		    border: 2px solid #000;
		    background: #fff;
		    opacity: .9;
		    color: black;
		    padding: 10px;
		    width: 375px;
		    font-size: 1.6em;
		    line-height: 28pt;
		    /*font-weight: lighter;*/
		    /*visibility: visible;*/
		}
		
		table.table {
			display: table;
			width: 100%;
		}
		
		table.table thead,
		table.table tbody {
			float: left;
			width: 100%;
		}
		
		table.table tbody {
			overflow: auto;
			height: 350px;
		}
		
		table.table tr {
			width: 100%;
			display: table;
			text-align: left;
		}
		
		table.table th,
		table.table td {
			width: 20%;
		}
		
		.filter-count,
		.total-count,
		.number-display,
		#dateHeader {
			color: #3182bd;
			font-weight: bold;
			font-size: 24px;
		}
		
		/*
		 * Full-page application style
		 */
		
		body.application,
		.keen-dashboard {
		  background: #f2f2f2; 
        /*background:#d9d9d9    ;*/
		  padding: 20px 20px 0px;
		}
		
		body.application > .container-fluid,
		.keen-dashboard > .container-fluid {
		  margin: 0px 0px 32px;
		  margin: 0px 0px 2rem;
		  padding-left: 0px;
		  padding-right: 0px;
		}
		
		body.application div[class^="col-"],
		.keen-dashboard div[class^="col-"] {
		  padding-left: 5px;
		  padding-right: 5px;
		}
		
		body.application div[class^="col-"] div[class^="col-"],
		.keen-dashboard div[class^="col-"] div[class^="col-"] {
		  padding-left: 15px;
		  padding-right: 15px;
		}
		
		body.application hr,
		.keen-dashboard hr {
		  border-color: #d7d7d7;
		  margin: 10px 0px;
		}
		
		body.application .navbar-inverse,
		.keen-dashboard .navbar-inverse {
		  /*background-color: #3d4a57;*/
		  border-color: #333;
		}
		
		body.application .navbar-inverse .navbar-nav > li > a,
		body.application .navbar .navbar-brand,
		.keen-dashboard .navbar-inverse .navbar-nav > li > a,
		.keen-dashboard .navbar .navbar-brand {
		  color: #fbfbfb;
		  text-decoration: none;
		}
		
		body.application .main-nav > li > a:hover,
		.keen-dashboard .main-nav > li > a:hover {
		  border-bottom: 2px solid transparent;
		  -webkit-transition: border 300ms ease;
		  -o-transition: border 300ms ease;
		  transition: border 300ms ease;
		  border-bottom-color: white;
		}
		
		body.application .return-link,
		body.application .return-link:focus,
		body.application .return-link:hover,
		.keen-dashboard .return-link,
		.keen-dashboard .return-link:focus,
		.keen-dashboard .return-link:hover {
		  text-decoration: none;
		}
		
		
		.chart-wrapper {
		  background: #fff;
		  border: 1px solid #e2e2e2;
		  border-radius: 3px;
		  margin-bottom: 10px;
		}
		.chart-wrapper .chart-title {
		  border-bottom: 1px solid #d7d7d7;
		  color: #666;
		  font-size: 14px;
		  font-weight: 200;
		  padding: 7px 10px 4px;
		}
		
		.chart-wrapper .chart-stage {
		  overflow: hidden;
		  padding: 5px 10px;
		  position: relative;
		}
		
		.chart-wrapper .chart-notes {
		  background: #fbfbfb;
		  border-top: 1px solid #e2e2e2;
		  color: #808080;
		  font-size: 12px;
		  padding: 8px 10px 5px;
		}
		.navbar-inverse {
			background-color: #3182bd;
		}
		
		.dc-chart .selected path {
			stroke-width: 1.0;
            
            
            
		}
    .div-total{
        width: 30%;
  max-width: 960px;
        
    }
		
		.col-sm-2,
		.col-sm-3,
		.col-sm-4,
		.col-sm-6,
		.col-sm-8,
		.col-sm-9,
		.col-sm-12 {
			/*border: solid;*/
		}
    .dc-chart g.row text {
    fill: black;
    font-size: 12px;
    cursor: pointer;    
        }
   
    .x.axis path {
    stroke-width: 1.5;
   }    
    
    .dc-chart g.axis x{
        fill: yellow;
        
    }
        
   text.shadow {
  stroke: #fff;
  stroke-width: 2.5px;
  opacity: 0.9;
}

path { 
    stroke: steelblue;
    
    
}

.axis path,
.axis line {
    fill: none;
    stroke: grey;
    stroke-width: 1;
    shape-rendering: crispEdges;
}

.grid .tick {
    stroke: lightgrey;
    stroke-opacity: 0.7;
    shape-rendering: crispEdges;
}
.grid path {
          stroke-width: 0;
}

.area {
    fill: lightsteelblue;
      stroke-width: 0;
}

    
    
</style>

<body class="application">
    <div class="navbar navbar-inverse" role="navigation">
	
    <div class="container-fluid">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
				<a class="navbar-brand" href="../">
					<span class="glyphicon glyphicon-chevron-left"></span>
				</a>
				<!--<a class="navbar-brand" href="./">Donors Choose Dashboard</a>
			</div>
			<div class="navbar-collapse collapse">
				<ul class="nav navbar-nav navbar-left">
					<li><a href="https://www.donorschoose.org/">Home</a></li>
					<li><a href="https://data.donorschoose.org/open-data/overview/">Source</a></li>
				</ul>-->
            <a class="navbar-brand" href="./">Kart -BSB</a>
			</div>
				</div>
     </div>
 

      <div class="tab-content">
    
    <div id="panel_1" class="tab-pane fade in active">
   <div class="container-fluid">
		
		
		<!-- row and ring charts -->
		<div class="row">
			
            <!-- status ring chart -->
			
            <!-- amount row chart -->
			
			
            <!-- UF chart -->			
            
       
       
       
       </div>
		<!-- /.row -->
       
        
		<!-- bar charts -->
		<div class="row">
			<!-- resources bar chart -->
            <div class="col-sm-8">
				<!-- row chart -->
				<div class="chart-wrapper">
					<div class="chart-title">
                        <span><strong>Box-Plot :</strong> Distribuição de dados relativo aos melhores tempos.</span>
					</div>
					<!-- /.chart-title -->
					<div class="chart-stage">
                        <div class="alert alert-info alert-dismissable">
                            <a href="#" class="close" data-dismiss="alert" aria-label="close">×</a>
                            <strong>Info !</strong> A partir da corrida 2 os dados estão simulados </div>
						<div id="box-test"></div>

                        <!-- #chart-bolha-capítulo -->
					</div>
					<!-- /.chart-stage -->
					<div class="chart-notes"></div>
					<!-- /.chart-notes -->
				</div>
				<!-- /.chart-wrapper -->
			</div>
            
        <div id="temp" class="col-sm-4">
				<div class="chart-wrapper">
					<div class="chart-title">
                        <span><span><strong> Corridas: </strong></span> Selecione a(s) corrida(s) 
                            
                        
					</div>
					<div class="chart-stage">
                        
						<div id="subitem-row-chart" class="dc-chart">
                            <div class="alert alert-info alert-dismissable">
                            <a href="#" class="close" data-dismiss="alert" aria-label="close">×</a>
                            <strong>Info !</strong> A partir da corrida 2 os dados estão simulados </div>
						
						<div id="pie-chart"></div> 
	
                        </div>
						<!-- #UFBarChart -->
					</div>
					<div class="chart-notes"></div>
				
				</div>
			</div>
            
		
            <div id="temp" class="col-sm-12">
				<div class="chart-wrapper">
					<div class="chart-title">
                        <span><span><strong> & </strong></span> Selecione a(s) corrida(s) 
                            
                        
					</div>
					<div class="chart-stage">
                        
						<div id="subitem-row-chart" class="dc-chart">
                            
						<div id="test"></div> 
	
                        </div>
						<!-- #UFBarChart -->
					</div>
					<div class="chart-notes"></div>
				
				</div>
			</div>
        
            <div id="temp" class="col-sm-4">
				<div class="chart-wrapper">
					<div class="chart-title">
                        <span><span><strong> Corridas: </strong></span> Selecione a(s) corrida(s) 
                            
                        
					</div>
					<div class="chart-stage">
                        
						<div id="subitem-row-chart" class="dc-chart">
                            <div class="alert alert-info alert-dismissable">
                            <a href="#" class="close" data-dismiss="alert" aria-label="close">×</a>
                            <strong>MicroP&pi;</strong> A partir da corrida 2 os dados estão simulados </div>
						
						<div id="table"></div> 
	
                        </div>
						<!-- #UFBarChart -->
					</div>
					<div class="chart-notes"></div>
				
				</div>
			</div>
        	
			
			
			
		</div>
		<!-- /.row -->
        <div class="row">
            
            
        
        </div>
       
       
		<!-- table data -->
		
	</div>        
        
    </div>
      
       
      
      
      
    <div id="tutorial" class="tab-pane fade">
        <div id="GroupedBarChart"  role="main">
        
            <br>
            <br>
            <br>
            
            <span>TESTE</span>
            
        </div>
     </div>    
      
      
      
        
        
  </div> 

<div class="container">

    
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    
    
    <script type="text/javascript" src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>
    <!-- D3 Queue JavaScript -->
	<!-- Crossfilter JavaScript -->
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/crossfilter/1.3.12/crossfilter.min.js"></script>
	<!-- DC.js Core JavaScript -->
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/dc/2.0.0-beta.32/dc.min.js"></script>
	<!-- Moment Core JavaScript -->
  
    
<script type="text/javascript">
    

    function createViz(){
chart = dc.boxPlot("#box-test"),
pie = dc.pieChart("#pie-chart");
chart2 = dc.dataTable("#table");    
// Segundo bloco de visualizações        
var focusChart = dc.lineChart("#focuschart");
var overviewChart = dc.seriesChart("#test-overview");

  

 d3.csv("morley.csv",function(error,dados){
    
    dados.forEach(function(d) {
        formatDecimal = d3.format(".1f"), 
        d.Speed = formatDecimal(+d.Speed);
    });
        
    var height = 250;
		         
	// Definindo tabela
    ndx2  = crossfilter(dados);
    var fmt = d3.format('02d');
    var runDimension2    = ndx2.dimension(function(d) {return [fmt(+d.Expt),fmt(+d.Run)];}),
        grouping = function (d) { return d.Expt;};
     
     var speedSumGroup = runDimension2.group().reduceSum(function (d) {
        return d.Speed;
    }); 

   runGroup = runDimension2.group().reduceSum(function(d) { return +d.Speed; });     
     
  ;  
     
     
     
            
  var ndx                 = crossfilter(dados),
      runDimension        = ndx.dimension(function(d) {return +d.Run;}),
      runGroup            = runDimension.group(),
      experimentDimension = ndx.dimension(function(d) {return d.Expt;}),
      speedArrayGroup     = experimentDimension.group().reduce(
        function(p,v) {
          p.push(v.Speed);
          return p;
        },
        function(p,v) {
          p.splice(p.indexOf(v.Speed), 1);
          return p;
        },
        function() {
          return [];
        }
      );
             
             
     
     chart
     .width(width* 0.65)
	.height(height*2.4)
    .margins({top: 10, right: 50, bottom: 30, left: 50})
    .dimension(experimentDimension)
    .group(speedArrayGroup)
    .elasticX(true)
              .yAxisLabel("Melhores Tempos")
             .y(d3.scale.linear().domain([41, 49]))
               .renderlet(function (chart) {
                chart.selectAll("g.x text")
                .attr('transform', "rotate(-20)");
            })
    ;
  
    pie
    .width(width* 0.30)
    .height(height*2.4)
    .radius(width*0.12)
    .dimension(runDimension)
    .group(runGroup)
    ;           
             ;
             
             
    chart2
        .width(768)
        .height(480)
        .dimension(runDimension2)
        .group(grouping)
        .size(Infinity)
        .columns(['Run', 'Speed'])
        .sortBy(function (d) { return [fmt(+d.Expt),fmt(+d.Run)]; })
        .order(d3.ascending);
    
             
            
    chart.render();         
    
      var ofs = 0, pag = 17;
  function display() {
      d3.select('#begin')
          .text(ofs);
      d3.select('#end')
          .text(ofs+pag-1);
      d3.select('#last')
          .attr('disabled', ofs-pag<0 ? 'true' : null);
      d3.select('#next')
          .attr('disabled', ofs+pag>=ndx.size() ? 'true' : null);
      d3.select('#size').text(ndx.size());
  }
  
  function next() {
      ofs += pag;
      update();
      chart.redraw();
  }
  function last() {
      ofs -= pag;
      update();
      chart.redraw();
  }         
  
  dc.renderAll();
    /*
  var i=0;
  setInterval(function() {
    runDimension.filterAll();
    runDimension.filter([i++,21]);
    dc.renderAll();
  }, 2000);
*/

         }) };


         
 

function start() {    createViz();}
 
        
window.onload=function(event){
    width=document.getElementById('panel_1').offsetWidth;
    console.log("Largura Inicial: " +width );
    
    start();
    
    
};

    
        
    
</script>

</div>
</body>
</html>